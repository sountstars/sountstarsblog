{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{391:function(t,a,s){t.exports=s.p+\"assets/img/host.db91310c.jpg\"},392:function(t,a,s){t.exports=s.p+\"assets/img/proxy_process.645a726f.jpg\"},442:function(t,a,s){\"use strict\";s.r(a);var r=s(46),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[r(\"h1\",{attrs:{id:\"跨域-nginx本地项目代理\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#跨域-nginx本地项目代理\"}},[t._v(\"#\")]),t._v(\" 跨域&nginx本地项目代理\")]),t._v(\" \"),r(\"p\"),r(\"div\",{staticClass:\"table-of-contents\"},[r(\"ul\",[r(\"li\",[r(\"a\",{attrs:{href:\"#什么是跨域\"}},[t._v(\"什么是跨域\")]),r(\"ul\",[r(\"li\",[r(\"a\",{attrs:{href:\"#什么是同源策略\"}},[t._v(\"什么是同源策略？\")])])])]),r(\"li\",[r(\"a\",{attrs:{href:\"#如何解决跨域\"}},[t._v(\"如何解决跨域？\")]),r(\"ul\",[r(\"li\",[r(\"a\",{attrs:{href:\"#cors\"}},[t._v(\"CORS\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#jsonp\"}},[t._v(\"JSONP\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#nginx-反向代理\"}},[t._v(\"Nginx 反向代理\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#websocket\"}},[t._v(\"Websocket\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#window-postmessage\"}},[t._v(\"window.postMessage\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#document-domain-iframe\"}},[t._v(\"document.domain + Iframe\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#window-location-hash-iframe\"}},[t._v(\"window.location.hash + Iframe\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#window-name-iframe\"}},[t._v(\"window.name + Iframe\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#参考文章\"}},[t._v(\"参考文章\")])])])]),r(\"li\",[r(\"a\",{attrs:{href:\"#本地项目通过nginx代理\"}},[t._v(\"本地项目通过nginx代理\")]),r(\"ul\",[r(\"li\",[r(\"a\",{attrs:{href:\"#host文件修改指向\"}},[t._v(\"host文件修改指向\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#nginx解决端口问题\"}},[t._v(\"nginx解决端口问题\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#流程解析\"}},[t._v(\"流程解析\")])]),r(\"li\",[r(\"a\",{attrs:{href:\"#参考文章\"}},[t._v(\"参考文章\")])])])])])]),r(\"p\"),t._v(\" \"),r(\"h2\",{attrs:{id:\"什么是跨域\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#什么是跨域\"}},[t._v(\"#\")]),t._v(\" 什么是跨域\")]),t._v(\" \"),r(\"p\",[t._v(\"跨域是指浏览器允许向服务器发送跨域请求，从而克服\"),r(\"code\",[t._v(\"Ajax\")]),t._v(\"只能\"),r(\"code\",[t._v(\"同源\")]),t._v(\"使用的限制\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"什么是同源策略\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#什么是同源策略\"}},[t._v(\"#\")]),t._v(\" 什么是同源策略？\")]),t._v(\" \"),r(\"p\",[r(\"code\",[t._v(\"「protocol（协议）、domain（域名）、port（端口）三者一致。」\")])]),t._v(\" \"),r(\"p\",[t._v(\"「同源策略」是一个重要的\"),r(\"code\",[t._v(\"安全策略\")]),t._v(\"，它用于限制一个origin的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介。\")]),t._v(\" \"),r(\"h2\",{attrs:{id:\"如何解决跨域\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#如何解决跨域\"}},[t._v(\"#\")]),t._v(\" 如何解决跨域？\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"cors\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#cors\"}},[t._v(\"#\")]),t._v(\" CORS\")]),t._v(\" \"),r(\"p\",[t._v(\"跨域资源共享\"),r(\"a\",{attrs:{href:\"https://developer.mozilla.org/zh-CN/docs/Glossary/CORS\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"(CORS)\"),r(\"OutboundLink\")],1),t._v(\" 是一种机制，它使用额外的\"),r(\"a\",{attrs:{href:\"https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"HTTP\"),r(\"OutboundLink\")],1),t._v(\"头来告诉浏览器 让运行在一个 origin (domain) 上的 Web 应用被准许访问来自不同源服务器上的指定的资源。当一个资源从与该资源本身所在的服务器\"),r(\"strong\",[t._v(\"不同的域、协议或端口\")]),t._v(\"请求一个资源时，资源会发起一个\"),r(\"strong\",[t._v(\"跨域 HTTP 请求\")]),t._v(\"。\")]),t._v(\" \"),r(\"p\",[t._v(\"在 cors 中会有\"),r(\"code\",[t._v(\"简单请求\")]),t._v(\"和\"),r(\"code\",[t._v(\"复杂请求\")]),t._v(\"的概念\")]),t._v(\" \"),r(\"p\",[t._v(\"使用 IE<=9, Opera<12, or Firefox<3.5 或者更加老的浏览器，这个时候请使用 JSONP\")]),t._v(\" \"),r(\"p\",[r(\"a\",{attrs:{href:\"https://blog.csdn.net/xxssyyyyssxx/article/details/104431627\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"参考文章\"),r(\"OutboundLink\")],1)]),t._v(\" \"),r(\"h3\",{attrs:{id:\"jsonp\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#jsonp\"}},[t._v(\"#\")]),t._v(\" JSONP\")]),t._v(\" \"),r(\"ul\",[r(\"li\",[t._v(\"JSONP 主要就是利用了\"),r(\"code\",[t._v(\"script标签\")]),t._v(\"没有跨域限制的这个特性来完成的。\")]),t._v(\" \"),r(\"li\",[t._v(\"仅支持 GET 方法\")])]),t._v(\" \"),r(\"div\",{staticClass:\"language-js extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[r(\"code\",[r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\"script type\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),r(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"text/javascript\"')]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\"  \\nwindow\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),r(\"span\",{pre:!0,attrs:{class:\"token function-variable function\"}},[t._v(\"jsonpCallback\")]),t._v(\" \"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),r(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"function\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),r(\"span\",{pre:!0,attrs:{class:\"token parameter\"}},[t._v(\"res\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        console\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),r(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"log\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"res\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"  \\n    \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\"script\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\"\\n\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\"script  src\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),r(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"http://localhost:8080/api/jsonp?msg=hello&cb=jsonpCallback\"')]),t._v(\"  type\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),r(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"text/javascript\"')]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\"script\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\"\\n\")])])]),r(\"h3\",{attrs:{id:\"nginx-反向代理\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#nginx-反向代理\"}},[t._v(\"#\")]),t._v(\" Nginx 反向代理\")]),t._v(\" \"),r(\"p\",[t._v(\"配置如下个菜单\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"websocket\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#websocket\"}},[t._v(\"#\")]),t._v(\" Websocket\")]),t._v(\" \"),r(\"p\",[t._v(\"WebSocket 规范定义了一种 API，可在网络浏览器和服务器之间建立“套接字”连接,这种方式本质\"),r(\"code\",[t._v(\"没有使用了 HTTP 的响应头\")]),t._v(\", 因此也\"),r(\"code\",[t._v(\"没有跨域\")]),t._v(\"的限制\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"window-postmessage\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#window-postmessage\"}},[t._v(\"#\")]),t._v(\" window.postMessage\")]),t._v(\" \"),r(\"p\",[t._v(\"postMessage提供了一种受控机制来规避此限制，只要正确的使用，这种方法就很安全。\")]),t._v(\" \"),r(\"p\",[t._v(\"otherWindow.postMessage(message, targetOrigin, [transfer]);\\n\"),r(\"a\",{attrs:{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"详细用法\"),r(\"OutboundLink\")],1)]),t._v(\" \"),r(\"h3\",{attrs:{id:\"document-domain-iframe\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#document-domain-iframe\"}},[t._v(\"#\")]),t._v(\" document.domain + Iframe\")]),t._v(\" \"),r(\"p\",[t._v(\"该方式只能用于\"),r(\"strong\",[t._v(\"二级域名相同\")]),t._v(\"的情况下，比如 a.test.com 和 b.test.com 适用于该方式。\\n只需要给页面添加\"),r(\"code\",[t._v(\"document.domain ='test.com'\")]),t._v(\"表示二级域名都相同就可以实现跨域。\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"window-location-hash-iframe\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#window-location-hash-iframe\"}},[t._v(\"#\")]),t._v(\" window.location.hash + Iframe\")]),t._v(\" \"),r(\"p\",[t._v(\"通过 url 带 hash ，通过一个非跨域的中间页面来传递数据。\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"window-name-iframe\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#window-name-iframe\"}},[t._v(\"#\")]),t._v(\" window.name + Iframe\")]),t._v(\" \"),r(\"p\",[t._v(\"iframe 的 src 属性由外域转向本地域，跨域数据即由 iframe 的 window.name 从外域传递到本地域\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"参考文章\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考文章\"}},[t._v(\"#\")]),t._v(\" 参考文章\")]),t._v(\" \"),r(\"p\",[r(\"a\",{attrs:{href:\"https://juejin.cn/post/6844904126246027278#heading-38\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"参考文章\"),r(\"OutboundLink\")],1)]),t._v(\" \"),r(\"h2\",{attrs:{id:\"本地项目通过nginx代理\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#本地项目通过nginx代理\"}},[t._v(\"#\")]),t._v(\" 本地项目通过nginx代理\")]),t._v(\" \"),r(\"p\",[t._v(\"本地启动nginx并修改host文件\")]),t._v(\" \"),r(\"h3\",{attrs:{id:\"host文件修改指向\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#host文件修改指向\"}},[t._v(\"#\")]),t._v(\" host文件修改指向\")]),t._v(\" \"),r(\"p\",[t._v(\"比如我这里新增设置了一个\"),r(\"code\",[t._v(\"127.0.0.1 liyulaikkk.kaikeba.com\")]),t._v(\"的域名：\"),r(\"br\"),t._v(\" \"),r(\"strong\",[r(\"code\",[t._v(\"伪造本地的hosts文件，实现对域名的解析\")])]),t._v(\" \"),r(\"img\",{attrs:{src:s(391),alt:\"solar\"}}),t._v(\" \"),r(\"a\",{attrs:{href:\"https://zhuanlan.zhihu.com/p/126118758\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"host文件解释\"),r(\"OutboundLink\")],1)]),t._v(\" \"),r(\"h3\",{attrs:{id:\"nginx解决端口问题\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#nginx解决端口问题\"}},[t._v(\"#\")]),t._v(\" nginx解决端口问题\")]),t._v(\" \"),r(\"p\",[r(\"code\",[t._v(\"server_name\")]),t._v(\"访问的地址与host一致 ，\"),r(\"code\",[t._v(\"proxy_pass\")]),t._v(\"本地项目启动地址+端口\")]),t._v(\" \"),r(\"div\",{staticClass:\"language-js extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[r(\"code\",[t._v(\"http \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\"),r(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"//     省略配置\")]),t._v(\"\\n    server \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        listen \"),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"80\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        server_name liyulaimos\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"kaikeba\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"com\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        location \"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\" \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        proxy_pass http\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"127.0\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\".0\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\".1\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3006\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    server \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        listen \"),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"80\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        server_name liyulaikkk\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"kaikeba\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"com\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        location \"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\" \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        proxy_pass http\"),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"127.0\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\".0\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\".1\")]),r(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),r(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"3000\")]),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),r(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\")])])]),r(\"h3\",{attrs:{id:\"流程解析\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#流程解析\"}},[t._v(\"#\")]),t._v(\" 流程解析\")]),t._v(\" \"),r(\"ol\",[r(\"li\",[t._v(\"浏览器准备发起请求，访问http://mamage.leyou.com，但需要进行域名解析\")]),t._v(\" \"),r(\"li\",[t._v(\"优先进行本地域名解析，因为我们修改了hosts，所以解析成功，得到地址：127.0.0.1（本机）\")]),t._v(\" \"),r(\"li\",[t._v(\"请求被发往解析得到的ip，并且默认使用80端口：http://127.0.0.1:80 ，本机的nginx一直监听80端口，因此捕获这个请求\")]),t._v(\" \"),r(\"li\",[t._v(\"nginx中配置了反向代理规则，将manage.leyou.com代理到http://127.0.0.1:9001\")]),t._v(\" \"),r(\"li\",[t._v(\"主机上的后台系统的webpack server监听的端口是9001，得到请求并处理，完成后将响应返回到nginx\")]),t._v(\" \"),r(\"li\",[t._v(\"主机上的后台系统的webpack server监听的端口是9001，得到请求并处理，完成后将响应返回到nginx\"),r(\"br\"),t._v(\" \"),r(\"strong\",[t._v(\"流程图\")]),t._v(\" \"),r(\"img\",{attrs:{src:s(392),alt:\"solar\"}})])]),t._v(\" \"),r(\"h3\",{attrs:{id:\"参考文章-2\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考文章-2\"}},[t._v(\"#\")]),t._v(\" 参考文章\")]),t._v(\" \"),r(\"p\",[r(\"a\",{attrs:{href:\"https://blog.csdn.net/weixin_42148087/article/details/107488823\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"参考文章\"),r(\"OutboundLink\")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);","extractedComments":[]}